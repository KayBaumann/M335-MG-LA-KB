<ion-content fullscreen class="min-h-screen bg-gradient-to-br from-[#191919] via-[#1a1a1a] to-[#0d0d0d]">
  <div class="min-h-screen text-white p-6" *ngIf="session as s">

    <div class="mb-6 rounded-2xl border border-white/10 bg-[#252525] p-6">
      <h1 class="text-2xl font-semibold mb-2">Ergebnis</h1>
      <p class="text-sm text-white/70">Gl√ºckwunsch, {{ s.name }}.</p>
    </div>

    <div class="grid grid-cols-2 gap-3 mb-6">
      <div class="rounded-2xl border border-white/10 bg-[#252525] p-4">
        <div class="text-xs text-white/60 mb-1">Punkte</div>
        <div class="text-2xl font-semibold">{{ totalPoints }}</div>
      </div>

      <div class="rounded-2xl border border-white/10 bg-[#252525] p-4">
        <div class="text-xs text-white/60 mb-1">Zeit</div>
        <div class="text-2xl font-semibold">{{ formatDuration(s.totalDurationSec) }}</div>
      </div>

      <div class="rounded-2xl border border-white/10 bg-[#252525] p-4">
        <div class="text-xs text-white/60 mb-1">Schnitzel</div>
        <div class="text-2xl font-semibold">{{ s.totalSchnitzel }}</div>
      </div>

      <div class="rounded-2xl border border-white/10 bg-[#252525] p-4">
        <div class="text-xs text-white/60 mb-1">Potatoes</div>
        <div class="text-2xl font-semibold">{{ s.totalPotatoes }}</div>
      </div>
    </div>

    <div class="mb-6 rounded-2xl border border-white/10 bg-[#252525] p-6">
      <h2 class="text-lg font-semibold mb-4">Tasks</h2>

      <div class="space-y-3">
        <div class="flex items-center justify-between rounded-xl border border-white/10 bg-[#1a1a1a] px-4 py-3"
          *ngFor="let t of s.tasks">
          <div>
            <div class="font-medium">{{ t.title }}</div>
            <div class="text-xs text-white/60">
              Status: {{ t.status }} |
              Zeit: {{ formatDuration(t.durationSec || 0) }}
            </div>
          </div>

          <div class="text-right text-xs text-white/70">
            <div>Schnitzel {{ t.schnitzelEarned }}</div>
            <div>Potato {{ t.potatoEarned }}</div>
          </div>
        </div>
      </div>
    </div>

    <div class="space-y-3">
      <ion-button expand="block" (click)="submitToGoogleForm()" [disabled]="submitting || submitOk">
        <ion-icon name="cloud-upload-outline" slot="start"></ion-icon>
        {{ submitOk ? 'Gesendet' : (submitting ? 'Sende...' : 'Ergebnis senden') }}
      </ion-button>

      <ion-button expand="block" fill="outline" (click)="viewLeaderboard()">
        <ion-icon name="trophy-outline" slot="start"></ion-icon>
        Leaderboard
      </ion-button>

      <ion-button expand="block" fill="outline" (click)="playAgain()">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Nochmal spielen
      </ion-button>
    </div>

  </div>
</ion-content>