<div class="task-wrapper">
  <ng-container *ngIf="!initialLoading; else loadingState">

    <!-- WIFI DISPLAY -->
    <div class="wifi-card">
      <div class="center">
        <div class="icon-circle">
          <ion-icon name="wifi" class="wifi-icon" [class.connected]="isWifiConnected"
            [class.disconnected]="!isWifiConnected">
          </ion-icon>
        </div>

        <p class="subtitle">
          {{ isWifiConnected ? 'WLAN verbunden' : 'WLAN getrennt' }}
        </p>
      </div>
    </div>

    <!-- STATUS -->
    <div class="status-card">
      <div class="status-row">
        <span class="label">Einmal verbunden</span>
        <span class="value">{{ wasConnected ? 'Ja' : 'Nein' }}</span>
      </div>

      <div class="status-row">
        <span class="label">Einmal getrennt</span>
        <span class="value">{{ wasDisconnected ? 'Ja' : 'Nein' }}</span>
      </div>
    </div>

    <!-- CONTROLS -->
    <div class="controls">

      <ion-button expand="block" class="primary-btn" [disabled]="completed" (click)="toggleWifi()">

        <ion-icon slot="start" [name]="toggleIconName"></ion-icon>
        {{ toggleButtonText }}
      </ion-button>

      <div class="done" *ngIf="completed">
        <ion-icon name="checkmark-circle" class="done-icon"></ion-icon>
        <span>Aufgabe abgeschlossen</span>
      </div>

    </div>

  </ng-container>

  <ng-template #loadingState>
    <div class="loading-screen">
      <ion-spinner name="crescent"></ion-spinner>
      <p>WLAN-Status wird initialisiertâ€¦</p>
    </div>
  </ng-template>
</div>